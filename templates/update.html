<!-- templates/update.html -->
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">
    <div class="alert alert-primary d-flex align-items-center justify-content-between shadow-sm rounded-3 p-3 mb-4">
      <div>
        <h2 class="mb-0">üìù ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h2>
        <large class="text-muted">‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: <strong>{{ employee.id }}</strong></large>
      </div>
    </div>
    <div class="card shadow">
        <div class="card-body">
            <form method="post" class="row g-3">
                <div class="col-md-3">
                    <label for="pre" class="form-label">*‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤:</label><br>
                    <select name="pre" id="pre" class="form-control" required>
                      <option value="">-- ‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤ --</option>
                      <option value="‡∏ô‡∏≤‡∏¢" {% if employee.pre =='‡∏ô‡∏≤‡∏¢' %}selected{% endif %}>‡∏ô‡∏≤‡∏¢</option>
                      <option value="‡∏ô‡∏≤‡∏á" {% if employee.pre =='‡∏ô‡∏≤‡∏á' %}selected{% endif %}>‡∏ô‡∏≤‡∏á</option>
                      <option value="‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß" {% if employee.pre =='‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß' %}selected{% endif %}>‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß</option>
                    </select>
                </div>
                <div class="col-md-3">
                  <label for="name" class="form-label">*‡∏ä‡∏∑‡πà‡∏≠:</label>
                  <input name="name" id="name" class="form-control" value="{{ employee.name }}" required>
                </div>
                <div class="col-md-3">
                  <label for="sur_name" class="form-label">*‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
                  <input name="sur_name" id="sur_name" class="form-control" value="{{ employee.sur_name }}" required>
                </div>
                <div class="col-md-3">
                  <label for="type" class="form-label">*‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</label><br>
                  <select name="type" id="type" class="form-control" required>
                    <option value="">-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó --</option>
                    <option value="‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô" {% if employee.type =='‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô' %}selected{% endif %}>‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
                    <option value="‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô" {% if employee.type =='‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' %}selected{% endif %}>‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                  </select>
                </div>
                <div class="col-md-3">
                  <label for="department_id" class="form-label">‡πÅ‡∏ú‡∏ô‡∏Å:</label><br>
                  <select name="department_id" id="department_id" class="form-control">
                    <option value="">-- ‡πÅ‡∏ú‡∏ô‡∏Å --</option>
                      {% for dept in departments %}
                    <option value="{{ dept.id }}" {% if dept.id|string == employee.department_id|string %}selected{% endif %}>
                      {{ dept.name }}
                    </option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-md-3">
                  <label for="id_card" class="form-label">*‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£ ‡∏õ‡∏ä‡∏ä:</label>
                  <input name="id_card" id="id_card" class="form-control" value="{{ employee.id_card }}" required>
                </div>
                <div class="col-md-3">
                  <label for="gender" class="form-label">*‡πÄ‡∏û‡∏®:</label><br>
                  <select name="gender" id="gender" class="form-control" required>
                    <option value="">-- ‡πÄ‡∏û‡∏® --</option>
                    <option value="‡∏ä‡∏≤‡∏¢" {% if employee.gender =='‡∏ä‡∏≤‡∏¢' %}selected{% endif %}>‡∏ä‡∏≤‡∏¢</option>
                    <option value="‡∏´‡∏ç‡∏¥‡∏á" {% if employee.gender =='‡∏´‡∏ç‡∏¥‡∏á' %}selected{% endif %}>‡∏´‡∏ç‡∏¥‡∏á</option>
                  </select>
                </div>
                <div class="col-md-3">
                  <label for="nationality" class="form-label">‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏¥:</label>
                  <input name="nationality" id="nationality" class="form-control" value="{{ employee.nationality }}">
                </div>
                <div class="col-md-3">
                  <label for="senior" class="form-label">‡∏ß‡∏∏‡∏í‡∏¥:</label>
                  <input name="senior" id="senior" class="form-control" value="{{ employee.senior }}">
                </div>
                <div class="col-md-3">
                  <label for="birth" class="form-label">*‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</label>
                  <input name="birth" id="birth" class="form-control" value="{{ employee.birth }}" required>
                </div>
                <div class="col-md-3">
                  <label for="start_date" class="form-label">‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô:</label>
                  <input name="start_date" id="start_date" class="form-control" value="{{ employee.start_date }}">
                </div>
                <div class="col-md-3">
                  <label for="bank_account" class="form-label">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                  <input name="bank_account" id="bank_account" class="form-control" value="{{ employee.bank_account }}">
                </div>
                <div class="col-md-3">
                  <label for="phone" class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</label>
                  <input name="phone" id="phone" class="form-control" value="{{ employee.phone }}">
                </div>
                <div class="col-md-3">
                  <label for="email" class="form-label">Email:</label>
                  <input name="email" id="email" class="form-control" value="{{ employee.email }}">
                </div>
                <div class="col-md-3">
                  <label for="address" class="form-label">*‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</label>
                  <input name="address" id="address" class="form-control" value="{{ employee.address }}" required>
                </div>
                <div class="col-md-3">
                  <label for="main_skill" class="form-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏´‡∏•‡∏±‡∏Å:</label>
                  <input name="main_skill" id="main_skill" class="form-control" value="{{ employee.main_skill }}">
                </div>
                <div class="col-md-3">
                  <label for="sub_skill1" class="form-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏∑‡πà‡∏ô 1:</label>
                  <input name="sub_skill1" id="sub_skill1" class="form-control" value="{{ employee.sub_skill1 }}">
                </div>
                <div class="col-md-3">
                  <label for="sub_skill2" class="form-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏∑‡πà‡∏ô 2:</label>
                  <input name="sub_skill2" id="sub_skill2" class="form-control" value="{{ employee.sub_skill2 }}">
                </div>
                <div class="col-12"><hr></div>
                <div class="col-12 mt-3"><h4>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô</h4></div>
                <div class="col-md-3">
                  <label for="exit_date" class="form-label">‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å:</label>
                  <input name="exit_date" id="exit_date" class="form-control" value="{{ employee.exit_date if employee.exit_date else '' }}" placeholder="‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å (dd/mm/yyyy)">
                </div>
                <div class="col-md-3">
                  <label for="exit_reason" class="form-label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</label>
                  <input name="exit_reason" id="exit_reason" class="form-control" value="{{ employee.exit_reason if employee.exit_reason else '' }}" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏">
                </div>
                <div class="col-12"><hr></div>
                <div class="col-12">
                    <input type="hidden" name="next_url" value="{{ request.referrer }}">
                    <button type="submit" class="btn btn-success">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    <a href="javascript:history.back()" class="btn btn-secondary">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</a>
                </div>
            </form>
        </div>
    </div>

  <hr class="my-5">
  <h4>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</h4>
  <div class="table-responsive">
        <table class="table table-striped">
        <thead class="table-light">
          <tr>
            <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
            <th>‡∏ä‡∏∑‡πà‡∏≠</th>
            <th>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
            <th>‡πÄ‡∏û‡∏®</th>
            <th>‡πÅ‡∏ú‡∏ô‡∏Å</th>
            <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</th>
          </tr>
        </thead>
        <tbody>
          {% for h in history %}
          <tr>
            <td>{{ h.updated_at }}</td>
            <td>{{ h.name }}</td>
            <td>{{ h.sur_name }}</td>
            <td>{{ h.gender }}</td>
            <td>{{ departments | selectattr("id", "equalto", h.department_id) | map(attribute="name") | list | first or "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏" }}</td>
            <td>{{ h.changes|safe }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
  </div>

</div>
</body>
</html>